<%- include('./includes/head.ejs') %>
</head>

<body class="body">
  <header>
<%- include('./includes/navbar.ejs') %>

 </header>

  <div class="main-content">
  <div class="container row align-items-center">
    <div class="wrapper">
       <div>
          <div class="list-content col-md-6 order-md-1 text-center text-md-left pr-md-5"> 

            <% for (let i=0; i<events.length; i++) { %>
              
              <span><a href="/events/<%= events[i]._id %>"><h3><%=events[i].title%></h3></a></span>
              <h5><%=events[i].date%><h5>
              <h6><%=`Artists: ${events[i].artists}`%></h6>     
                                       
            <%}%>   
          </div>  
          </div>

          <div>
          <form action="/events/filtered" method="get" id="eventFilterForm">
        <div class="form-content col-md-4">
            <fieldset>
            <label>Filter Events</label>
              <!-- Begin dropdown lists -->
                        <select class="form-control" type="text" name="venue" id="venue">
                          <option selected disabled>By Venue</option>
                            <option value="<%= null %>">All</option> 
                            <%for (let i=0; i<venues.length; i++) {%>
                              <option value="<%= venues[i] %>"><%= venues[i] %></option>                                
                            <%}%>  
                         </select>

                        <select class="form-control" type="text" name="city" id="city">
                          <option selected disabled>By City/Region<option>
                            <option value="<%= null %>">All</option> 
                            <%for (let i=0; i<cities.length; i++) {%>
                              <option value="<%= cities[i] %>"><%= cities[i] %></option>                              
                            <%}%> 
                        </select>

                        <select class="form-control" type="text" name="country" id="country">
                          <option selected disabled>By Country</option>
                            <option value="<%= null %>">All</option> 
                            <%for (let i=0; i<countries.length; i++) {%>
                              <option value="<%= countries[i] %>"><%= countries[i] %></option>                                
                            <%}%>  
                        </select>

                        <select class="form-control" type="text" name="artist" id="artist">
                          <option selected disabled>By Artist</option>
                            <option value="<%= null %>">All</option> 
                            <%for (let i=0; i<artists.length; i++) {%>
                              <option value="<%= artists[i] %>"><%= artists[i] %></option>                                
                            <%}%>  
                        </select>
            
                <!-- End dropdown lists -->
              </fieldset>
            </form>
               <input type="submit" form="eventFilterForm" class="btn btn-primary pull-right" 
               value="Filter">
            
              <!-- Begin conditional results if there is a string country value --> 
            <div class="results">
            <% if (typeof venue == 'string' || typeof city == 'string' || typeof country == 'string' || typeof artist == 'string') { %>
              <h4>Results</h4>
              <h5><%=typeof venue == 'string' ? `Venue: ${venue}` :'' %></h5>
              <h5><%=typeof city == 'string' ? `City/Region: ${city}` : ''%></h5>
              <h5><%=typeof country == 'string' ? `Country: ${country}` : ''%></h5>
              <h5><%=typeof artist == 'string' ? `Artist: ${artist}` : ''%></h5>
            <% } %>
            </div>
          </div>   

        </div>  
  </div>




<%- include('./includes/footer.ejs') %>